# 04. Big Data

## 시스템 구성도

![Hadoop Echo System](.gitbook/assets/image%20%281%29.png)

![Spark System](.gitbook/assets/image%20%285%29.png)

## 데이터처리 패키지 비교

| Feature | Strom | Spark | Samza |
| :--- | :--- | :--- | :--- |
| Delivery Semantics | At Least Once Exactly-Once with Trident | Exactly Once Except in some failure scenarios | At Least Once |
| State Management | Stateless Roll your own or use Trident | Stateful Writes state to storage \(HDFS\) | Stateful Embeded key-value store |
| Latency | Sub-Second | Seconds Depending on batch size | Sub-Second |
| Language Support | Any JVM-languages, Ruby, Python, Javascript, Perl | Scala, JAVA, Python, R | Scala, JAVA JVM-languages only |
| Processing Model | one-at-a-time | micro-batch / batch | one-at-a-time |
| Backpressure | O | O | X |
| Stream Source | Spouts | Receivers | ConSumers |
| Stream Primitive | Tuple | Dstream | Message |
| Stream Computation | Bolts | Transformations Window operations | Tasks |

{% hint style="info" %}
**요약**

**Spark**는 Latency 에서 다소 느린 점이 있지만, exactly-once 전송을 제공하고 다양한 워크로드 컴포넌트를 제공한다.

**Storm**은 Latency 에서 유리하지만, Trident를 적용해야 exactly-once 전송을 제공하며 상태관리기능도 Trident를 통해서 적용하거나 자체개발을 해야 한다.

**Samza**는 Latency 에서 유리하지만, 아직 마이너버전이고 At Least Once 전송만을 제공하고 있다.
{% endhint %}

## 검색 패키지 비교

| Feature | Solr | Elasticsearch |
| :--- | :--- | :--- |
| Community & Developers | Apache Software Foundation and community support | Single commercial entity and its employees |
| Node Discovery | Apache Zookeeper, mature and battle-tested in a large number of projects | Zen, built into Elasticsearch itself, requires dedicated master nodes to be split brain proof |
| Shard Placement | Static in nature, requires manual work to migrate shards, starting from Solr 7 – Autoscaling API allows for some dynamic actions  | Dynamic, shards can be moved on demand depending on the cluster state |
| Caches | Global, invalidated with each segment change | Per segment, better for dynamically changing data |
| Analytics Engine | Facets and powerful streaming aggregations | Sophisticated and highly flexible aggregations |
| Optimized Query Execution | Currently none | Faster range queries depending on the context |
| Search Speed | Best for static data, because of caches and uninverted reader | Very good for rapidly changing data, because of per-segment caches |
| Analysis Engine Performance | Great for static data with exact calculations | Exactness of the results depends on data placement |
| Full Text Search Features | Language analysis based on Lucene, multiple suggesters, spell checkers, rich highlighting support | Language analysis based on Lucene, single suggest API implementation, highlighting rescoring |
| DevOps Friendliness | Not fully there yet, but coming | Very good APIs |
| Non-flat Data Handling | Nested documents and parent-child support | Natural support with nested and object types allowing for virtually endless nesting and parent-child support |
| Query DSL | JSON \(limited\), XML \(limited\) or URL parameters | JSON |
| Index/Collection Leader Control | Leader placement control and leader rebalancing possibility to even the load on the nodes | Not possible |
| Join | Currently none | Parent\_type/Children\_type |
| Machine Learning | Built-in – on top of streaming aggregations focused on logistic regression and learning to rank contrib module | Commercial feature, focused on anomalies and outliers and time-series data |
| Ecosystem | Modest – Banana, Zeppelin with community support | Rich – Kibana, Grafana, with large entities support and big user base |
| RDBMS Ingestion | dataimportHandler | logstash |

## 데이터 수집 패키지 비교

| Feature | Flume | Fluentd | Log Stash | Sqoop |
| :--- | :--- | :--- | :--- | :--- |
| 언어 | Java | Ruby | Ruby & Java | Java |
| 입력 | Avro Source | Dummy Input | Beats Input | FTP Connector |
|  | Exec Source | Exec Input | Elastic Search Input | Hbase Connector |
|  | HTTP Source | Forward Input | Exec Input | HDFS Connector |
|  | JMS Source | HTTP Input | File Input | JDBC Connector |
|  | Kafka Source | Monitor Agent Input | HTTP Input | Kafka Connector |
|  | NetCat TCP Source | Syslog Input | IRC Input | Kite Connector |
|  | NetCat UDP Source | Tail Input | JDBC Input |  |
|  | Scribe Source | TCP Input | JMS Input |  |
|  | Sequence Generator Source | UDP Input | Kafka Input |  |
|  | Spooling Directory Source | Windows Eventlog Input | Log4J Input |  |
|  | Stress Source Source |  | Pipe Input |  |
|  | Syslog Source |  | Rabbit MQ Input |  |
|  | Taildir Source |  | Redis Input |  |
|  | Thrift Source |  | S3 Input |  |
|  | Twitter 1% firehose Source |  | Stdin Input |  |
|  |  |  | STOMP Input |  |
|  |  |  | Syslog Input |  |
|  |  |  | TCP Input |  |
|  |  |  | UDP Input |  |
|  |  |  | XMPP Input |  |
| 출력 | Avro Sink |  |  |  |
|  | Elastic Search Sink |  |  |  |
|  | File Roll Sink |  |  |  |
|  | Hbase Sink |  |  |  |
|  | HDFS Sink |  |  |  |
|  | Hive Sink |  |  |  |
|  | HTTP Sink |  |  |  |
|  | IRC Sink |  |  |  |
|  | Kafka Sink |  |  |  |
|  | Kite Dataset Sink |  |  |  |
|  | Logger Sink |  |  |  |
|  | MorphlineSolr Sink |  |  |  |
|  | Null Sink |  |  |  |
|  | Thrift Sink |  |  |  |



